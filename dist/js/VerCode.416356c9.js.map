{"version":3,"file":"js/VerCode.416356c9.js","mappings":"0HACO,SAASA,EAAcC,GAC1B,IAAIC,EAAM,gBACV,OAAOA,EAAIC,KAAKF,EACpB,CAEO,SAASG,EAAeC,GAC3B,IAAIC,EAAW,IAAID,GACfE,EAAM,GAQV,OAPAD,EAASE,KAAI,CAACC,EAAKC,KAEXH,GADAG,EAAQ,GAAKA,EAAQ,EACd,IAEAD,CACX,IAEGF,CACX,C,mNChBOI,MAAM,Q,GACJA,MAAM,Y,UAEPC,EAAAA,EAAAA,IAA0C,OAArC,aAAW,qBAAmB,W,GAAnCC,G,UAEFD,EAAAA,EAAAA,IAAkB,YAAZ,SAAK,K,GAERD,MAAM,e,UACTC,EAAAA,EAAAA,IAAe,UAAX,UAAM,K,GACLD,MAAM,c,UAETC,EAAAA,EAAAA,IAAW,SAAR,QAAI,K,GAEJD,MAAM,kB,UAUXC,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,K,mHAvBvBE,EAAAA,EAAAA,IA+BM,MA/BNC,EA+BM,EA9BJH,EAAAA,EAAAA,IAKM,MALNI,EAKM,cAJJF,EAAAA,EAAAA,IAEM,OAFDH,MAAM,OAAQM,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,QAAQC,IAAI,KAH5CC,IAMMC,KAEFZ,EAAAA,EAAAA,IAiBM,MAjBNa,EAiBM,CAhBJC,GACAd,EAAAA,EAAAA,IAGM,MAHNe,EAGM,EAFJf,EAAAA,EAAAA,IAAgC,YAA1B,QAAIgB,EAAAA,EAAAA,IAAGC,EAAAC,WAAS,GACtBC,KAEFnB,EAAAA,EAAAA,IASM,MATNoB,EASM,EARJC,EAAAA,EAAAA,IAOEC,EAAA,CANCC,OAAQ,GACRC,OAAQ,EACRC,MAAM,EACNC,MAAOT,EAAAU,QACPC,QAASX,EAAAY,aACTC,QAAKxB,EAAA,KAAAA,EAAA,GAAAC,GAAEU,EAAAY,cAAe,I,8BAG3BE,KAGFV,EAAAA,EAAAA,IAIEW,EAAA,CA/BNC,WA4BehB,EAAAU,QA5Bf,sBAAArB,EAAA,KAAAA,EAAA,GAAAC,GA4BeU,EAAAU,QAAOpB,GACf2B,KAAMjB,EAAAY,aACNM,OAAI7B,EAAA,KAAAA,EAAA,GAAAC,GAAEU,EAAAY,cAAe,I,0EAY5B,GACEO,IAAAA,GACE,MAAO,CACLP,cAAc,EACdF,QAAS,GACTT,UAAW,GACXmB,YAAa,GACbC,OAAQ,GAEZ,EACAC,OAAAA,GACEC,KAAKtB,WAAY1B,EAAAA,EAAAA,IAAeiD,eAAeC,QAAQ,UACvDF,KAAKH,YAAcI,eAAeC,QAAQ,QAC5C,EACAC,MAAO,CACL,aAAMhB,CAAQiB,GACZ,GAAsB,GAAlBA,EAAQpB,OAAa,CACvB,IAAI3B,QAAYgD,EAAAA,EAAAA,IAAaL,KAAKH,YAAaO,GAG/C,GAAmB,MAAf/C,EAAIyC,OAAgB,CACtB,IAAIQ,QAAeC,EAAAA,EAAAA,MACnBP,KAAKQ,OAAOC,OAAO,iBAAiB,GAEpCC,QAAQC,IAAIL,GACZN,KAAKQ,OAAOC,OAAO,aAAcH,EAAOV,MAExCI,KAAK/B,QAAQ2C,KAAK,YAqBpB,MACEC,EAAAA,EAAAA,IAAU,SACVb,KAAKb,QAAU,EAEnB,CACF,I,UCxFJ,MAAM2B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://wangyiyun-demo/./src/utils/checkPhone.js","webpack://wangyiyun-demo/./src/views/Login/VerCode.vue","webpack://wangyiyun-demo/./src/views/Login/VerCode.vue?c047"],"sourcesContent":["/* 校验手机号码是否为正确的 */\r\nexport function isPhoneNumber(tel) {\r\n    var reg = /^1[3-9]\\d{9}$/;\r\n    return reg.test(tel);\r\n}\r\n// 隐藏手机号2-7位\r\nexport function phoneNumFilter(phone) {\r\n    let phoneArr = [...phone];\r\n    let arr = []\r\n    phoneArr.map((res, index) => {\r\n        if (index > 2 && index < 7) {\r\n            arr += '*';\r\n        } else {\r\n            arr += res;\r\n        }\r\n    });\r\n    return arr;\r\n}\r\n\r\n// 检测运营商\r\nexport function checkOperator(phone) {\r\n    // 移动\r\n    let CMCC = /^1(3[4-9]|5[012789]|8[23478]|4[7]|7[8])\\d{8}$/\r\n    // 联通\r\n    let CUCC = /^1(3[0-2]|5[56]|8[56]|4[5]|7[6])\\d{8}$/;\r\n    // 电信\r\n    let CTCC = /^1(3[3])|(8[019])\\d{8}$/;\r\n    if (CMCC.test(phone)) {\r\n        return \"CMCC\"\r\n    }\r\n    if (CUCC.test(phone)) {\r\n        return \"CUCC\"\r\n    }\r\n    if (CTCC.test(phone)) {\r\n        return \"CTCC\"\r\n    }\r\n}","<template>\r\n  <div class=\"main\">\r\n    <div class=\"main-top\">\r\n      <svg class=\"icon\" @click=\"$router.go(-1)\">\r\n        <use xlink:href=\"#icon-zuojiantou1\"></use>\r\n      </svg>\r\n      <span>手机号登陆</span>\r\n    </div>\r\n    <div class=\"main-bottom\">\r\n      <h3>请输入验证码</h3>\r\n      <div class=\"bottom-top\">\r\n        <span>已发送至{{ phoneInfo }}</span>\r\n        <p>重新发送</p>\r\n      </div>\r\n      <div class=\"bottom-content\">\r\n        <van-password-input\r\n          :gutter=\"10\"\r\n          :length=\"4\"\r\n          :mask=\"false\"\r\n          :value=\"verCode\"\r\n          :focused=\"showKeyboard\"\r\n          @focus=\"showKeyboard = true\"\r\n        />\r\n      </div>\r\n      <h5>手机号已更换，无法接收到短信？</h5>\r\n    </div>\r\n\r\n    <van-number-keyboard\r\n      v-model=\"verCode\"\r\n      :show=\"showKeyboard\"\r\n      @blur=\"showKeyboard = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch } from \"vue\";\r\nimport { phoneNumFilter } from \"../../utils/checkPhone\";\r\nimport { checkVerCode, getLoginUser } from \"@/request/api/home.js\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { showToast } from 'vant';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showKeyboard: false,\r\n      verCode: \"\",\r\n      phoneInfo: \"\",\r\n      phoneNumber: \"\",\r\n      status: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.phoneInfo = phoneNumFilter(sessionStorage.getItem(\"phone\"));\r\n    this.phoneNumber = sessionStorage.getItem(\"phone\");\r\n  },\r\n  watch: {\r\n    async verCode(newCode) {\r\n      if (newCode.length == 4) {\r\n        let res = await checkVerCode(this.phoneNumber, newCode);\r\n        // console.log(\"checkVerCode\");\r\n        // console.log(res.data);\r\n        if (res.status === 200) {\r\n          let result = await getLoginUser();\r\n          this.$store.commit(\"updateIsLogin\", true);\r\n          // this.$store.commit(\"updateToken\", result.data.token);\r\n          console.log(result);\r\n          this.$store.commit(\"updateUser\", result.data);\r\n          // sessionStorage.setItem(\"user\", JSON.stringify(result.data));\r\n          this.$router.push(\"/userInfo\");\r\n          // let result = await this.$store.dispatch(\"getLogin\");\r\n          // console.log(\"登录\" + result);\r\n          // if (result.data.code === 200) {\r\n          //   this.$store.commit(\"updateIsLogin\", true);\r\n          //   this.$store.commit(\"updateToken\", result.data.token);\r\n          //   let resuser = await getLoginUser(res.data.account.id);\r\n          //   console.log(resuser);\r\n          //   this.$store.commit(\"updateUser\", resuser);\r\n          //   this.$router.push(\"/infoUser\");\r\n          // }\r\n          // } else {\r\n          //   alert(\"验证码错误！\");\r\n          //   router.push({\r\n          //     path: \"/login\",\r\n          //   });\r\n          // }\r\n          /* time = setTimeout(async () => {\r\n          //let res = await checkVerCode(phoneNumber, newCode);\r\n\r\n        }); */\r\n        } else {\r\n          showToast(\"验证码错误\");\r\n          this.verCode = \"\";\r\n        }\r\n      }\r\n    },\r\n  },\r\n  // setup() {\r\n  //   const router = useRouter();\r\n\r\n  //   let showKeyboard = ref(false);\r\n  //   let verCode = ref();\r\n\r\n  //   let phoneInfo = ref(\"\");\r\n  //   let phoneNumber = ref(\"\");\r\n  //   let status = ref(\"\");\r\n  //   phoneInfo.value = phoneNumFilter(sessionStorage.getItem(\"phone\"));\r\n  //   phoneNumber.value = sessionStorage.getItem(\"phone\");\r\n  //   //console.log(verCode.length);\r\n\r\n  //   let time = \"\";\r\n\r\n  //   watch(verCode, (newCode) => {\r\n  //     clearTimeout(time);\r\n  //     /* time = setTimeout(async () => {\r\n  //         //let res = await checkVerCode(phoneNumber, newCode);\r\n\r\n  //       }); */\r\n  //     if (newCode.length == 4 && status.value == '200') {\r\n  //       router.push({\r\n  //         path: \"/\",\r\n  //         name: \"home\",\r\n  //       });\r\n  //     }\r\n  //   });\r\n\r\n  //   return {\r\n  //     showKeyboard,\r\n  //     verCode,\r\n  //     phoneInfo,\r\n  //     phoneNumber,\r\n  //   };\r\n  // },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main {\r\n  padding: 0.5rem;\r\n  .main-top {\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n    span {\r\n      width: 90%;\r\n      font-size: 0.48rem;\r\n      text-align: center;\r\n    }\r\n  }\r\n  .main-bottom {\r\n    margin-top: 1.6rem;\r\n    h3 {\r\n      margin-bottom: 0.3rem;\r\n      font-size: 19px;\r\n    }\r\n    .bottom-top {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 0.32rem;\r\n      color: #666;\r\n      p {\r\n        color: #0fa1a1;\r\n      }\r\n    }\r\n    .bottom-content {\r\n      margin-top: 1.4rem;\r\n    }\r\n    h5 {\r\n      text-align: center;\r\n      margin-top: 1.2rem;\r\n      color: #ccc;\r\n    }\r\n  }\r\n}\r\n/deep/.van-password-input__item {\r\n  border-bottom: 1px solid #888 !important;\r\n}\r\n</style>","import { render } from \"./VerCode.vue?vue&type=template&id=dde003ca&scoped=true\"\nimport script from \"./VerCode.vue?vue&type=script&lang=js\"\nexport * from \"./VerCode.vue?vue&type=script&lang=js\"\n\nimport \"./VerCode.vue?vue&type=style&index=0&id=dde003ca&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dde003ca\"]])\n\nexport default __exports__"],"names":["isPhoneNumber","tel","reg","test","phoneNumFilter","phone","phoneArr","arr","map","res","index","class","_createElementVNode","_hoisted_3","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_cache","$event","_ctx","$router","go","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","phoneInfo","_hoisted_9","_hoisted_10","_createVNode","_component_van_password_input","gutter","length","mask","value","verCode","focused","showKeyboard","onFocus","_hoisted_11","_component_van_number_keyboard","modelValue","show","onBlur","data","phoneNumber","status","mounted","this","sessionStorage","getItem","watch","newCode","checkVerCode","result","getLoginUser","$store","commit","console","log","push","showToast","__exports__","render"],"sourceRoot":""}