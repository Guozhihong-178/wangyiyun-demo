"use strict";(self["webpackChunkwangyiyun_demo"]=self["webpackChunkwangyiyun_demo"]||[]).push([[763],{8564:function(s,e,t){t.r(e),t.d(e,{default:function(){return F}});var i=t(6768),a=t(5130),l=t(4232);const n=s=>((0,i.Qi)("data-v-0536b946"),s=s(),(0,i.jt)(),s),r={class:"searchview"},o={class:"searchTop"},c=n((()=>(0,i.Lk)("use",{"xlink:href":"#icon-zuojiantou"},null,-1))),u=[c],d=n((()=>(0,i.Lk)("span",null,"搜索",-1))),h={class:"searchHistory"},k=n((()=>(0,i.Lk)("span",{class:"searchSpan"},"搜索历史",-1))),L=n((()=>(0,i.Lk)("use",{"xlink:href":"#icon-trash"},null,-1))),y=[L],p=["onClick"],v={class:"itemList"},g=["onClick"],m={class:"songDetail"},f={class:"songName"},C={class:"songIntro"},W={key:0},w={class:"itemright"},K={class:"icon","aria-hidden":"true"},E={key:0,"xlink:href":"#icon-mv1"},X=n((()=>(0,i.Lk)("svg",{class:"icon","aria-hidden":"true"},[(0,i.Lk)("use",{"xlink:href":"#icon-gengduo1"})],-1)));function I(s,e,t,n,c,L){return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",o,[((0,i.uX)(),(0,i.CE)("svg",{class:"icon hand","aria-hidden":"true",onClick:e[0]||(e[0]=e=>s.$router.go(-1))},u)),(0,i.bo)((0,i.Lk)("input",{type:"text",placeholder:"搜索音乐、视频、播客、歌词","onUpdate:modelValue":e[1]||(e[1]=s=>c.searchKey=s),onKeydown:e[2]||(e[2]=(0,a.jR)(((...s)=>L.enterKey&&L.enterKey(...s)),["enter"]))},null,544),[[a.Jo,c.searchKey]]),d]),(0,i.Lk)("div",h,[(0,i.Lk)("div",null,[k,((0,i.uX)(),(0,i.CE)("svg",{class:"icon hand","aria-hidden":"true",onClick:e[3]||(e[3]=(...s)=>L.delHistory&&L.delHistory(...s))},y))]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.keyWorldList,(s=>((0,i.uX)(),(0,i.CE)("span",{key:s,class:"spanKey hand",onClick:e=>L.searchHistory(s)},(0,l.v_)(s),9,p)))),128))]),(0,i.Lk)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.searchList,((s,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"item"},[(0,i.Lk)("div",{class:"itemleft",onClick:e=>L.updateIndex(s)},[(0,i.Lk)("div",m,[(0,i.Lk)("div",f,(0,l.v_)(s.name),1),(0,i.Lk)("span",C,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.artists,((e,t)=>((0,i.uX)(),(0,i.CE)("span",{key:t},[(0,i.eW)((0,l.v_)(e.name)+" ",1),s.artists.length>1&&t!==s.artists.length-1?((0,i.uX)(),(0,i.CE)("span",W," / ")):(0,i.Q3)("",!0)])))),128))])])],8,g),(0,i.Lk)("div",w,[((0,i.uX)(),(0,i.CE)("svg",K,[0!=s.mvid?((0,i.uX)(),(0,i.CE)("use",E)):(0,i.Q3)("",!0)])),X])])))),128))])])}var S=t(3079),_=t(782),b=t(1508),x={data(){return{searchKey:"",keyWorldList:[],searchList:[]}},mounted(){this.keyWorldList=JSON.parse(localStorage.getItem("keyWorldList"))?JSON.parse(localStorage.getItem("keyWorldList")):[]},methods:{async enterKey(){if(""!==this.searchKey){this.keyWorldList.unshift(this.searchKey),this.keyWorldList=[...new Set(this.keyWorldList)],this.keyWorldList.length>10&&this.keyWorldList.splice(this.keyWorldList.length-1,1),localStorage.setItem("keyWorldList",JSON.stringify(this.keyWorldList));let s=await(0,S.o)(this.searchKey);console.log(this.searchList),this.searchList=s.data.result.songs,this.searchKey=""}},delHistory(){localStorage.removeItem("keyWorldList"),this.keyWorldList=[]},async searchHistory(s){this.keyWorldList.unshift(s),this.keyWorldList=[...new Set(this.keyWorldList)],this.keyWorldList.length>10&&this.keyWorldList.splice(this.keyWorldList.length-1,1);let e=await(0,S.o)(s);this.searchList=e.data.result.songs,console.log(this.searchList)},async updateIndex(s){s.al=s.album,s.al.picUrl=s.album.artist.img1v1Url,s.ar=s.artists,this.pushPlayList(s);try{this.updatePlayListIndex(this.$store.state.playList.length-1),this.updateDuration(s.duration),this.updateMusicListName("搜索")}catch(e){console.error("获取音乐播放信息失败:",e),(0,b.P0)("获取音乐播放信息失败")}},...(0,_.PY)(["pushPlayList","updatePlayListIndex","updateMusicListName","updateDuration"])}},H=t(1241);const N=(0,H.A)(x,[["render",I],["__scopeId","data-v-0536b946"]]);var F=N},3775:function(s,e,t){t.r(e),t.d(e,{default:function(){return K}});t(4114);var i=t(6768),a=t(4232);const l=s=>((0,i.Qi)("data-v-630436fa"),s=s(),(0,i.jt)(),s),n={class:"topNav"},r=l((()=>(0,i.Lk)("use",{"xlink:href":"#icon-bars"},null,-1))),o=[r],c={class:"middle"},u=l((()=>(0,i.Lk)("span",{class:"active"},"我的",-1))),d=l((()=>(0,i.Lk)("span",null,"云村",-1))),h=l((()=>(0,i.Lk)("span",null,"视频",-1))),k=l((()=>(0,i.Lk)("use",{"xlink:href":"#icon-search"},null,-1))),L=[k],y={class:"infoUserTop"},p=["src"],v={class:"name"};function g(s,e,t,l,r,k){const g=(0,i.g2)("SideBar"),m=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",n,[(0,i.Lk)("div",null,[((0,i.uX)(),(0,i.CE)("svg",{class:"icon","aria-hidden":"true",onClick:e[0]||(e[0]=s=>r.show=!0)},o))]),(0,i.Lk)("div",c,[u,(0,i.Lk)("span",{onClick:e[1]||(e[1]=e=>s.$router.push("/"))},"发现"),d,h]),(0,i.Lk)("div",null,[((0,i.uX)(),(0,i.CE)("svg",{class:"icon","aria-hidden":"true",onClick:e[2]||(e[2]=e=>s.$router.push("/search"))},L))])]),(0,i.Lk)("div",y,[(0,i.Lk)("img",{src:s.user?s.user.profile.avatarUrl:"https://www.100chui.com/public/pc/common/default_head.png",alt:"",class:"profileimg"},null,8,p),(0,i.Lk)("div",v,(0,a.v_)(s.user.profile.nickname),1)]),(0,i.bF)(m,{show:r.show,"onUpdate:show":e[3]||(e[3]=s=>r.show=s),position:"left",style:{height:"100%",width:"80%"}},{default:(0,i.k6)((()=>[(0,i.bF)(g)])),_:1},8,["show"])],64)}var m=t(782),f=t(5286),C={data(){return{show:!1}},components:{SideBar:f.A},computed:{...(0,m.aH)(["user","isLogin"])}},W=t(1241);const w=(0,W.A)(C,[["render",g],["__scopeId","data-v-630436fa"]]);var K=w}}]);
//# sourceMappingURL=Search.d4ab0924.js.map